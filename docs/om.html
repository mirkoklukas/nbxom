---

title: Title
keywords: fastai
sidebar: home_sidebar

summary: "summary"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: om.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline
<span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Parsing-the-notebook">Parsing the notebook<a class="anchor-link" href="#Parsing-the-notebook">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Finding-tags,-filter-cells">Finding tags, filter cells<a class="anchor-link" href="#Finding-tags,-filter-cells">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extract_tag" class="doc_header"><code>extract_tag</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L15" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extract_tag</code>(<strong><code>line</code></strong>)</p>
</blockquote>
<p>Returns the name of a tag (#name), if it
occurs at the beginning of the line, or None.</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">extract_tag</span><span class="p">(</span><span class="s2">&quot;#nbx &quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;nbx&quot;</span>
<span class="k">assert</span> <span class="n">extract_tag</span><span class="p">(</span><span class="s2">&quot;#nbx  something else &quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;nbx&quot;</span>
<span class="k">assert</span> <span class="n">extract_tag</span><span class="p">(</span><span class="s2">&quot;# nbx something else &quot;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span>
<span class="k">assert</span> <span class="n">extract_tag</span><span class="p">(</span><span class="s2">&quot;#xarg &quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;xarg&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="contains_tag" class="doc_header"><code>contains_tag</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L23" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>contains_tag</code>(<strong><code>name</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">is_nbx</span><span class="p">(</span><span class="s2">&quot;#nbx&quot;</span><span class="p">)</span> 
<span class="k">assert</span> <span class="n">is_nbx</span><span class="p">(</span><span class="s2">&quot;# nbx&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span>
<span class="k">assert</span> <span class="n">is_nbx</span><span class="p">(</span><span class="s2">&quot; #nbx&quot;</span><span class="p">)</span> 
<span class="k">assert</span> <span class="n">is_nbx</span><span class="p">(</span><span class="s2">&quot;  #nbx&quot;</span><span class="p">)</span> 
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_nbx_cell" class="doc_header"><code>is_nbx_cell</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L29" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_nbx_cell</code>(<strong><code>cell</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>When we create our python script we need to exclude jupyter's <em>magic</em> functions and shell commands that can beused in a code cell.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_magic_or_shell" class="doc_header"><code>is_magic_or_shell</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L39" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_magic_or_shell</code>(<strong><code>line</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">is_magic_or_shell</span><span class="p">(</span><span class="s2">&quot;%pwd &quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">is_magic_or_shell</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%%</span><span class="s2">capture &quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">is_magic_or_shell</span><span class="p">(</span><span class="s2">&quot;!ls&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parsing-&quot;xargs&quot;">Parsing "xargs"<a class="anchor-link" href="#Parsing-&quot;xargs&quot;">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We need to parse the line below <code>#xarg</code>, and decompose it into a variable declaration and the parameter range for the sweep.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="strip" class="doc_header"><code>strip</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L55" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>strip</code>(<strong><code>s</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_xarg" class="doc_header"><code>parse_xarg</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L58" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_xarg</code>(<strong><code>line</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">parse_xarg</span><span class="p">(</span><span class="s2">&quot;x = 0 ; [0,1,2,3]&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(&#39;x&#39;, &#39;0&#39;, &#39;[0,1,2,3]&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Extracting-imports">Extracting imports<a class="anchor-link" href="#Extracting-imports">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_imports_from_src" class="doc_header"><code>get_imports_from_src</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L69" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_imports_from_src</code>(<strong><code>src</code></strong>)</p>
</blockquote>
<p>Taken from:
<a href="https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module">https://stackoverflow.com/questions/9008451/python-easy-way-to-read-all-import-statements-from-py-module</a></p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_import_statement" class="doc_header"><code>create_import_statement</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L108" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_import_statement</code>(<strong><code>module</code></strong>, <strong><code>name</code></strong>, <strong><code>alias</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">src</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">import ast</span>
<span class="s2">x=0;</span>
<span class="s2">from collections import (namedtuple,</span>
<span class="s2">                         b)</span>
<span class="s2">&quot;&quot;&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extract_imports_from" class="doc_header"><code>extract_imports_from</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L115" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extract_imports_from</code>(<strong><code>src</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">extract_imports_from</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[2, 3, 4]
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>([&#39;import ast&#39;,
  &#39;from collections import namedtuple&#39;,
  &#39;from collections import b&#39;],
 [1, 3, 4])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parsing-&quot;nbx&quot;-cells">Parsing "nbx" cells<a class="anchor-link" href="#Parsing-&quot;nbx&quot;-cells">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First let's load the notebook</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Bunch" class="doc_header"><code>class</code> <code>Bunch</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L123" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Bunch</code>(<strong><code>adict</code></strong>=<em><code>{}</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_nb" class="doc_header"><code>load_nb</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L130" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_nb</code>(<strong><code>fname</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nb</span> <span class="o">=</span> <span class="n">load_nb</span><span class="p">(</span><span class="s2">&quot;om.ipynb&quot;</span><span class="p">)</span>
<span class="n">nb</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>dict_keys([&#39;cells&#39;, &#39;metadata&#39;, &#39;nbformat&#39;, &#39;nbformat_minor&#39;])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_src" class="doc_header"><code>parse_src</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L135" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_src</code>(<strong><code>a</code></strong>, <strong><code>src</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_nbx_cell" class="doc_header"><code>parse_nbx_cell</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L158" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_nbx_cell</code>(<strong><code>cell</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's see how it works</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#nbx</span>

<span class="c1">#xarg </span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>

<span class="c1">#xarg </span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span>

<span class="c1">#xarg</span>
<span class="n">task_id</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1">#xarg</span>
<span class="n">results_dir</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span>

<span class="c1"># some comment</span>
<span class="n">z</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#nbx</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;some result&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>some result
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nb</span> <span class="o">=</span> <span class="n">load_nb</span><span class="p">(</span><span class="s2">&quot;om.ipynb&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">cell</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">is_nbx_cell</span><span class="p">,</span> <span class="n">nb</span><span class="o">.</span><span class="n">cells</span><span class="p">)):</span>    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">*****************</span><span class="se">\n</span><span class="s2">** Parsed Cell **</span><span class="se">\n</span><span class="s2">*****************</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">xarg</span><span class="p">,</span> <span class="n">xbody</span> <span class="o">=</span> <span class="n">parse_nbx_cell</span><span class="p">(</span><span class="n">cell</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">xarg</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">xbody</span><span class="p">)</span>
    
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>
*****************
** Parsed Cell **
*****************

[&#39;x = 0 ; [0,1,2,3,4]\n&#39;, &#39;y = 0 ;\n&#39;, &#39;task_id = 0\n&#39;, &#39;results_dir = &#34;./&#34;\n&#39;]
[&#39;#nbx\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;# some comment\n&#39;, &#39;z = 1&#39;]

*****************
** Parsed Cell **
*****************

[]
[&#39;#nbx\n&#39;, &#39;\n&#39;, &#39;print(&#34;some result&#34;)&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parsing-the-whole-thing">Parsing the whole thing<a class="anchor-link" href="#Parsing-the-whole-thing">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="concat" class="doc_header"><code>concat</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L166" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>concat</code>(<strong><code>list1</code></strong>, <strong><code>list2</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="unzip" class="doc_header"><code>unzip</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L169" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>unzip</code>(<strong><code>zipped</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="negate" class="doc_header"><code>negate</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L172" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>negate</code>(<strong><code>func</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="is_constarg" class="doc_header"><code>is_constarg</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L175" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>is_constarg</code>(<strong><code>a</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_item" class="doc_header"><code>get_item</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L180" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_item</code>(<strong><code>i</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_items" class="doc_header"><code>get_items</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L183" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_items</code>(<strong>*<code>I</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_nb" class="doc_header"><code>parse_nb</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L187" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_nb</code>(<strong><code>nb</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nb</span>  <span class="o">=</span> <span class="n">load_nb</span><span class="p">(</span><span class="s2">&quot;om.ipynb&quot;</span><span class="p">)</span>
<span class="n">pnb</span> <span class="o">=</span> <span class="n">parse_nb</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pnb</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pnb</span><span class="o">.</span><span class="n">const_args</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pnb</span><span class="o">.</span><span class="n">sweep_args</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pnb</span><span class="o">.</span><span class="n">func_body</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[(&#39;x&#39;, &#39;0&#39;), (&#39;y&#39;, &#39;0&#39;), (&#39;task_id&#39;, &#39;0&#39;), (&#39;results_dir&#39;, &#39;&#34;./&#34;&#39;)]
[(&#39;y&#39;, &#39;0&#39;), (&#39;task_id&#39;, &#39;0&#39;), (&#39;results_dir&#39;, &#39;&#34;./&#34;&#39;)]
[(&#39;x&#39;, &#39;[0,1,2,3,4]&#39;)]
[&#39;#nbx\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;\n&#39;, &#39;# some comment\n&#39;, &#39;z = 1&#39;, &#39;#nbx\n&#39;, &#39;\n&#39;, &#39;print(&#34;some result&#34;)&#39;]
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Creating-the-file-bundle">Creating the file bundle<a class="anchor-link" href="#Creating-the-file-bundle">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_arrays" class="doc_header"><code>get_arrays</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L207" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_arrays</code>(<strong><code>num</code></strong>, <strong><code>m</code></strong>=<em><code>1000</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_arrays</span><span class="p">(</span><span class="mi">1543</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[[1, 1000], [1001, 1543]]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="init_job" class="doc_header"><code>init_job</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L218" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>init_job</code>(<strong><code>start</code></strong>, <strong><code>end</code></strong>, <strong><code>step</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="cont_job" class="doc_header"><code>cont_job</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L220" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>cont_job</code>(<strong><code>j</code></strong>, <strong><code>start</code></strong>, <strong><code>end</code></strong>, <strong><code>step</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="chain_jobs" class="doc_header"><code>chain_jobs</code><a href="https://github.com/mirkoklukas/nbx/tree/master/nbx/om.py#L223" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>chain_jobs</code>(<strong><code>arrays</code></strong>, <strong><code>step</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">chain_jobs</span><span class="p">(</span><span class="n">get_arrays</span><span class="p">(</span><span class="mi">1543</span><span class="p">),</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>job_0=`sbatch --array=1-1000%1 job.sh | awk &#39;{ print $4 }&#39;`
job_1=`sbatch --array=1001-1543%1 --dependency=afterok:$job_0 job.sh | awk &#39;{ print $4 }&#39;`

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="check_parsed_nb" class="doc_header"><code>check_parsed_nb</code><a href="__main__.py#L8" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>check_parsed_nb</code>(<strong><code>pnb</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NbxBundle" class="doc_header"><code>class</code> <code>NbxBundle</code><a href="" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NbxBundle</code>(<strong><code>nbname</code></strong>, <strong><code>mail_user</code></strong>, <strong><code>name</code></strong>=<em><code>None</code></em>, <strong><code>linting</code></strong>=<em><code>True</code></em>, <strong><code>time</code></strong>=<em><code>[1, 0]</code></em>, <strong><code>ntasks</code></strong>=<em><code>10</code></em>, <strong><code>step</code></strong>=<em><code>5</code></em>, <strong><code>simg</code></strong>=<em><code>'pytorch.simg'</code></em>, <strong><code>max_arr</code></strong>=<em><code>1000</code></em>, <strong><code>mem_per_cpu</code></strong>=<em><code>2000</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
</div>
 

